---
import Layout from "../../layout/Layout.astro";
import BlogComponent from "@components/BlogComponent.astro";
import Categories from "@components/Categories.astro";

import { getCollection } from "astro:content";

const posts = (await getCollection("blog")).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);

const title = "midudev 👨‍💻 | Artículos";
const description = "Artículos de midudev";
---

<Layout {title} {description}>
  <main class="grid grid-cols-4 items-start justify-between px-36">
    <section class="col-span-3">
      <h2 class="font-bold text-4xl pb-10">Artículos recientes</h2>
      <div class="flex flex-col items-start justify-center gap-10">
      {
        posts.map((post) => (
          <BlogComponent
            title={post.data.title}
            description={post.data.description}
            date={post.data.date}
            tags={post.data.tags}
            url={`/blog/${post.slug}`}
          />
        ))
      }
      </div>
    </section>
    <aside class="">
      <h3 class="font-bold text-2xl pb-10">Categorías</h3>
      <div class="flex flex-wrap gap-3">
        <Categories />
      </div>
    </aside>
  </main>
</Layout>
